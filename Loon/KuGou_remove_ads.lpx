#!name=ÈÖ∑ÁãóÈü≥‰πê
#!desc=ÂäüËÉΩË∞ÉËØï„ÄÅÁßªÈô§ÂºÄÂ±èÂπøÂëä„ÄÅÂ∫îÁî®ÂêÑÁ±ªÂºπÁ™ó„ÄÅÂêÑÁ±ªÊ®™ÂπÖÂπøÂëä„ÄÅËØÑËÆ∫Âå∫ÂπøÂëäÂíåÊí≠ÊîæÂô®ÁïåÈù¢ÂπøÂëä„ÄÇ
#!author=bb„ÄÅÂèØËéâüÖ•
#!icon=https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/KuGou.png
#!openUrl=https://apps.apple.com/app/id472208016
#!tag=ÂéªÂπøÂëä
#!loon_version=3.2.4(787)
#!homepage=https://hub.kelee.one
#!date=2025-05-13 15:17:08

[Rule]
# > (ÈùôÊÄÅËµÑÊ∫ê/ÂºπÁ™óÊãíÁªù)
URL-REGEX,"^https:\/\/vipssr\.kugou\.com\/static\/js\/async\/flexPayPopup",REJECT
URL-REGEX,"^https:\/\/gateway\.kugou\.com\/vipssr\/prepay_ios\.html",REJECT
URL-REGEX,"^https:\/\/staticssl\.kugou\.com\/common\/js-lib\/vip\/dlg_ctrler_v2\.js$",REJECT
URL-REGEX,"^https:\/\/h5\.kugou\.com\/apps\/vipcenter\/_next\/static\/css",REJECT
URL-REGEX,"^https:\/\/vipssr\.kugou\.com\/static\/js\/vip\/newUi\/vipPageUnionIosContent-",REJECT
URL-REGEX,"^https:\/\/fx\.service\.kugou\.com\/fx\/activity\/register\/center\/sidebar\/configV2$",REJECT
URL-REGEX,"^https:\/\/service1\.fanxing\.kugou\.com\/video\/mo\/live\/pull\/mutiline\/cfg",REJECT
URL-REGEX,"^http:\/\/log\.web\.kugou\.com\/postEvent\.php$",REJECT
# > (ÂπøÂëäÂüüÂêçÊãíÁªù)
DOMAIN,webvoobssdl.kugou.com,REJECT
DOMAIN,ad.tencentmusic.com,REJECT
DOMAIN,ads.service.kugou.com,REJECT
DOMAIN,adsfile.kugou.com,REJECT
DOMAIN,mdpfilebssdlbig.kugou.com,REJECT
DOMAIN,adserviceretry.kugou.com,REJECT
# > (ÂºÄÂ±èÂπøÂëäIPÊãíÁªù)
IP-CIDR,157.255.11.247/32,REJECT,no-resolve
IP-CIDR,111.206.99.202/32,REJECT,no-resolve

DOMAIN,ads.service.kugou.com,REJECT
DOMAIN,adstats.tencentmusic.com,REJECT
DOMAIN,adsmind.gdtimg.com,REJECT
DOMAIN,adserviceretry.kugou.com,REJECT
DOMAIN,adserviceretry.kglink.cn,REJECT
DOMAIN,ad.tencentmusic.com,REJECT
DOMAIN,adservice.kugou.com,REJECT
DOMAIN,splashimgretrybssdl.cloud.kugou.com,REJECT
URL-REGEX,"^http:\/\/log\.stat\.kugou\.com\/mobile\/ad\.html",REJECT

[Script]
http-response ^https?:\/\/(m\.kugou\.com|gateway(retry)?\.kugou\.com|ads\.service\.kugou\.com|welfare\.kugou\.com|fx\.service\.kugou\.com|hwstore\.kugou\.com|loginservice\.kugou\.com|expendablekmrcdnretry\.kugou\.com)\/(ssr\/decocenter\/home|v5\/login_by_token|v2\/get_login_extend_info|card\/v1\/pxy\/top|ads\.gateway\/v2\/sidebar_link|ads\.gateway\/v2\/sidebar_top_card|ads\.gateway\/v2\/home_card|mobile\/vipinfoV2|v4\/mobile_splash(_sort)?|v2\/get_vip_config|ads\.gateway\/v5\/task_video\/qualification|els\.abt\/v1\/tmeab|pxy\/v1\/combo\/startup|mstc\/musicsymbol\/v1\/system\/profile|pendant\/v2\/get_user_pendant|v1\/blindbox_cabinet\/client_cabinet|ads\.gateway\/v2\/mobile_link|card\/v1\/pxy\/listen|flow\/user_config\/get_level_config_ios|v1\/starlight\/get_campaign_infos|searchnofocus\/v1\/search_no_focus_word|updateservice\/v1\/get_dev_user|v1\/login_by_quick_token|card\/v1\/pxy\/recommend_stream(_v2)?|v1\/get_res_privilege\/lite|v1\/union\/audio_info|ads\.gateway\/v2\/task_center_entrance|ocean\/v6\/theme\/category|tools\.mobile\/v2\/theme\/info|promotionvip\/v3\/vip_level\/detail) script-path=https://raw.githubusercontent.com/Yu9191/Rewrite/refs/heads/main/kugou.js, requires-body=true, tag=ÈÖ∑Áãó_Êí≠Êîæres

http-response ^https?:\/\/gateway\.kugou\.com\/tracker\/v5\/url script-path=https://raw.githubusercontent.com/Yu9191/Rewrite/refs/heads/main/kugouv5.js, requires-body=true, tag=ÈÖ∑Áãó_Êí≠Êîæv5

http-response ^https?:\/\/(nacsing\.kugou\.com|acsing\.service\.kugou\.com|vipos\.kugou\.com|gateway\.kugou\.com|gamecenter\.kugou\.com|acsing\.tx\.kugou\.com)\/(sing7\/json\/v2\/user\/login|ccktv\/v1\/ktv_room\/room\/room_config|fxsing\/vip\/member\/info|sing7\/homepage\/json\/v3\/vip\/tip|v4\/price\/get_tips|vipenergy\/v2\/entrance\/vip_center_user_info|fxsing\/vip\/user\/info|sing7\/homepage\/json\/v3\/cdn\/kroom_tab_enter|v1\/home\/member_game|sing7\/homepage\/json\/v3\/cdn\/kroom_tab\/banners) script-path=https://raw.githubusercontent.com/Yu9191/Rewrite/refs/heads/main/kugouksong.js, requires-body=true, tag=ÈÖ∑Áãó_KÊ≠å

[Rewrite]
^https:\/\/gateway(retry)?\.kugou\.com\/ocean\/v\d\/tab\/list_v\d response-body-json-jq 'def namesToRemove:["AIÂ∏ÆÂî±","ÈïøÁõ∏ÊÄù2","KÊ≠å","Â∞èËØ¥","Ê∏∏Êàè"];def removeParentIfNameMatches:if type=="object"then with_entries(select(.value|(type=="object"and .name as $name|$name|IN(namesToRemove[])|not)))|map_values(removeParentIfNameMatches)else .end;removeParentIfNameMatches'
^https:\/\/fx\.service\.kugou\.com\/mfx-kugoulive\/ad\/ - reject-dict
^https:\/\/gateway(retry)?\.kugou\.com\/adp\/ad\/ - reject-dict
^https:\/\/gateway(retry)?\.kugou\.com\/ads\.gateway\/ - reject-dict
^https:\/\/gateway(retry)?\.kugou\.com\/v\d\/feeds\/follow_feed_fallback - reject-dict
^https:\/\/gateway(retry)?\.kugou\.com\/mstc\/musicsymbol\/v\d\/system\/profile - reject-dict
^https:\/\/gateway(retry)?\.kugou\.com\/searchnofocus\/v\d\/search_no_focus_word - reject-dict
^https:\/\/gateway(retry)?\.kugou\.com\/adp\/bubble\/v\d\/song_play - reject-dict
^https:\/\/gateway(retry)?\.kugou\.com\/singerdiscuss\/v\d\/entrance\/comment - reject-dict
^https:\/\/gateway(retry)?\.kugou\.com\/r\/v\d\/general\/putin\/midad - reject-dict
^https:\/\/gateway(retry)?\.kugou\.com\/ocean\/v\d\/sound\/banner - reject-dict
^https:\/\/gzacshow\.kugou\.com\/mfanxing-home\/cdn\/room\/index\/list_v2 - reject-dict
^https:\/\/gzacshow\.kugou\.com\/mfx-rt-show\/cdn\/mo\/show\/headline - reject-dict
^https:\/\/m1fxgroup\.kugou\.com\/fxsing\/yqc\/alongInfo\/getUserAlongInfo - reject-dict
^https:\/\/hwstore\.kugou\.com\/v\d\/get_store_data - reject-dict
^https:\/\/ep\.kugou\.com\/v\d\/album_shop\/get_entrance_info - reject-dict

[MITM]
hostname = *.kugou.com, *.*.kugou.com
